name: Harbor Pilot
run-name: Harbor Pilot ${{ github.sha }}
on:
  push:
    branches:
      - 'main'
jobs:
  Harbor-Pilot:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of the branch is ${{ github.ref }} and the repository is ${{ github.repository }}."
      - name: Harbor Pilot
        run: |
          REQUEST=$(echo ${{ secrets.HARBOR_PILOT_REQUEST }} | base64 -d)
          curl -X POST \
          -s -o /dev/null \
          -H "Content-Type: application/json" \
          -d "$(echo $REQUEST)" \
          "$(echo $REQUEST | jq -r '.apiGatewayUrl')"

      - run: echo "ğŸ This job's status is ${{ job.status }}."
